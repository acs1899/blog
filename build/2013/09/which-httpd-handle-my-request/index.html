<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
		
      <title>是哪个apache进程处理了我的请求 &bull; Louis-Sherren</title>
		
    <link rel="stylesheet" href="/stylesheets/screen.css" type="text/css" media="all" />
    <link rel="stylesheet" href="/stylesheets/syntax.css" type="text/css" media="all" />
    <link rel="alternate" title="louis-sherren" type="application/atom+xml" href="/atom.xml" />
    <link rel="shortcut icon" href="/images/favicon.ico" />
		<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css' /> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Viewport" content="maximum-scale=1.8,width=720" />
    
  </head>
 
  <body>
	
    <div id="header">
    	<h1>
    		<a href="/" title="louis-sherren">louis sherren</a>
    	</h1>
    </div>
    <div class="clear_both"></div>
    <div id="navigation">
    	<ul>
    		<li><a href="/about/" title="About this Blog">About</a></li>
    		<li><a href="/archive/" title="Archive of this Blog">Archive</a>&bull;</li> 
            <li id="c_popup"><a href="javascript:void" title="Category">Category</a>&bull;</li>
    		<li><a href="/" title="Blog">Blog</a>&bull;</li> 
    	</ul>
        <div class="category_popup">
            <div class="category_popup_main">
                <div class="category_item" data-href="/categories/linux/">Linux</div>
                <div class="category_item" data-href="/categories/php/">PHP</div>
                <div class="category_item" data-href="/categories/shell/">Shell</div>
                <div class="category_item" data-href="/categories/gist/">Gist</div>
                <div class="category_item" data-href="/categories/javascript/">JavaScript</div>
                <div class="category_item" data-href="/categories/c/">C</div>
                <div class="category_item" data-href="/categories/python/">Python</div>
                <div class="category_item" data-href="/categories/apache/">Apache</div>
                <div class="clear_both"></div>
            </div>
        </div>
    </div>			
    <div class="clear_both"></div>
		<h2>
	<a href="/2013/09/which-httpd-handle-my-request/" title="[Permalink] 是哪个apache进程处理了我的请求">是哪个apache进程处理了我的请求</a>
</h2>
<div class="post_date">23 September 2013</div>

<blockquote>
<p>当一个HTTP请求过来了，如何查看是哪个HTTPD在处理这个请求呢？</p>
</blockquote>

<hr>

<p>首先用</p>

<blockquote>
<p>netstat -ntpea</p>
</blockquote>

<p>查找监听80端口的进程并且状态为ESTABILISH的进程Inode</p>

<ul>
<li>-t TCP</li>
<li>-p Show the PID and name of the program to which each socket belongs.</li>
<li>-e Display additional information.  Use this option twice for maximum detail.</li>
<li>-a Show both listening and non-listening sockets.</li>
</ul>

<p>然后在PID列就可以找到进程号了。</p>

<p>如果出现无法显示PID的情况，可以给netstat 加-e参数打印进程的Inode值。</p>

<p>Linux中进程也是文件，所以肯定就有Inode，这时去/proc/*/fd/中查找这个这个值，查找到后获取</p>

<p>上级目录的进程号就可以了，查找命令如下：</p>

<blockquote>
<p>sudo ls -l /proc/*/fd/ | grep -E &quot;{$Inode}&quot; -A10 -B10</p>
</blockquote>


<div class="previous_next_post">

  
    <p>
      <strong>Previous Entry:</strong>
      <a href="/2013/09/my-first-blog/" title="Welcome to Jekyll!">Welcome to Jekyll!</a>
    </p>
  

  
    <p>
      <strong>Next Entry:</strong>
      <a href="/2013/09/wo-le-ge-cao/" title="my first post1">my first post1</a>
    </p>
  
  
  <div style="clear: both;"></div>
  
</div>


		
    <div id="footer">
      Powered by <a href="http://github.com/mojombo/jekyll" title="Jekyll Site Generator">Jekyll</a> 

    </div>
    <script src="/scripts/jquery.js"></script>
    <script>
        var c_popup = $("#c_popup");
        var category_popup = $(".category_popup");
        var category_items = $(".category_item");
        c_popup.mouseover(function(){
            category_popup.show();
        });
        c_popup.mouseout(function(){
            category_popup.hide();
        });
        category_popup.mouseover(function(){
            category_popup.show();
        })
        category_popup.mouseout(function(){
            category_popup.hide();
        });
        $(".category_item").click(function(){
            location.href = $(this).attr("data-href");
        });
    </script>
  </body>
</html>
